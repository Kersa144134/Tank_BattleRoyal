// ======================================================
// ExplosiveBullet.cs
// 作成者   : 高橋一翔
// 作成日   : 2025-12-12
// 更新日   : 2025-12-21
// 概要     : 榴弾の弾丸ロジッククラス
//            衝突または一定時間経過で爆発する
// ======================================================

using UnityEngine;

namespace WeaponSystem.Data
{
    /// <summary>
    /// 榴弾ロジッククラス
    /// 発射方向に飛行し、衝突または一定時間経過で爆発する
    /// </summary>
    public class ExplosiveBullet : BulletBase
    {
        // ======================================================
        // フィールド
        // ======================================================

        /// <summary>爆発判定半径</summary>
        private float _explosionRadius;

        // ======================================================
        // プロパティ
        // ======================================================

        /// <summary>爆発半径の外部設定用プロパティ</summary>
        public float ExplosiveRadius
        {
            get => _explosionRadius;
            set => _explosionRadius = value;
        }

        // ======================================================
        // セッター
        // ======================================================

        /// <summary>
        /// 発射時のパラメータを設定する
        /// </summary>
        /// <param name="radius">爆発判定半径</param>
        public void SetParams(float radius)
        {
            _explosionRadius = radius;
        }

        // ======================================================
        // 抽象メソッド
        // ======================================================

        /// <summary>
        /// 毎フレーム呼ばれる弾丸更新処理
        /// 移動・衝突判定・爆発を処理
        /// </summary>
        /// <param name="deltaTime">前フレームからの経過時間</param>
        public override void Tick(float deltaTime)
        {
            base.Tick(deltaTime);
        }

        // ======================================================
        // BulletBase イベント
        // ======================================================

        /// <summary>
        /// 弾丸終了時の処理
        /// 爆発を発生させた後、基底クラスの終了処理を行う
        /// </summary>
        public override void OnExit()
        {
            // 爆発処理
            Explode();

            // 基底クラスの終了処理
            base.OnExit();
        }

        /// <summary>
        /// 弾丸ヒット時の処理
        /// 爆発を発生させた後、基底クラスの終了処理を行う
        /// </summary>
        public override bool OnHit()
        {
            // 爆発処理
            Explode();

            // 弾丸消滅
            return base.OnHit();
        }
        
        // ======================================================
        // プライベートメソッド
        // ======================================================

        /// <summary>
        /// 爆発処理
        /// </summary>
        private void Explode()
        {
            
        }
    }
}